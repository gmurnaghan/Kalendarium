<script>
$(function(){
  $('[data-toggle="tooltip"]').tooltip()
})
</script>

<div class="container">

<!--   <p id="notice"><%= notice %></p> -->

  <div class="row">
    <strong>Folio:</strong>
    <%= @calendar_page.folio %>
  </div>

  <div class="row">
    <strong>Start:</strong>
    <%= "#{month_name @calendar_page.start_month} #{@calendar_page.start_day}" %>
  </div>

  <div class="row">
    <strong>End:</strong>
    <%= "#{month_name @calendar_page.end_month} #{@calendar_page.end_day}" %>
  </div>

  <div class="row">
    <button class="btn btn-secondary" type="button" data-toggle="modal" data-target="#update_calendar_page" >
      edit the calendar page with a modal, if you would like to
    </button>

    <%= link_to 'edit (without a modal)', edit_calendar_page_path(@calendar_page), class: "btn btn-secondary" %>
  </div>
</div>

<div class="modal fade" id="update_calendar_page" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg bordered-modal" role="document">
    <div class="modal-content">
      <h3>uh... go ahead!</h3>
      <div class='container'><%= render 'form', calendar_page: @calendar_page %></div>
    </div>
  </div>
</div>

<div class="container" id="calendar-table">
  <% @calendar_page.dates.each_with_index do |date, index| %>
    <% div_id = "#{date.first}-#{date.last}" %>
    <% grade = index.even? ? 'dark-grade' : 'light-grade' %>

    <%= content_tag(:div, id: div_id, class: grade){ render 'day', date: date }  %>

    <%= content_tag(:hr) if date.last == Kal::Months::MONTH_TABLE[date.first - 1].length %>
  <% end %>
</div>

<div class="container">
  <%#= link_to 'edit', edit_calendar_page_path, class: "btn btn-secondary" %>

  <%= link_to 'back', "/manuscripts/#{@calendar_page.manuscript.id}#calendar_pages", class: "btn btn-secondary" %>
  <%#= link_to 'Back', manuscript_path(@calendar_page.manuscript) %>
</div>


<div class="modal fade" id="feast-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg bordered-modal" role="document">
    <div class="modal-content">
      <div class="modal-header feast-header" style="font-size: 30px">
        New Feast
      </div>
      <div class="modal-body container">
        [...]
      </div>
      <div class="btn btn-secondary" id="hide-modal"> cancel </div>
    </div>
  </div>
</div>