<p id="notice"><%= notice %></p>

<p>
  <strong>Folio:</strong>
  <%= @calendar_page.folio %>
</p>

<p>
  <strong>Start:</strong>
  <%= "#{@calendar_page.start_month} #{@calendar_page.start_day}" %>
</p>

<p>
  <strong>End:</strong>
  <%= "#{@calendar_page.end_month} #{@calendar_page.end_day}" %>
</p>

<br>

<!--
<table id="calendar_table">
<% @calendar_page.dates.each do |date| %>
  <tr>
    <td>
      <strong><%= "#{CalendarPage::MONTHS.find{ |m| m.number == date.first }}" %></strong>
    </td>

    <td>
      <strong><%= date.second %></strong>
    </td>

    <td class="golden_number">
      <%= Kal::Days::DATE_HASH[date][:golden_number] %>
    </td>

    <td>
      <%= dominical_letter Kal::Days::DATE_HASH[date][:ordinal] %>
    </td>

    <td>
      <% feast = @calendar_page.manuscript.feasts.find{ |f| date.first == f.month_number && date.last == f.day_number } %>
      <% if feast.present? %>
        <%= link_to 'edit', edit_feast_path(feast) %> |
        <%= link_to 'delete', [@calendar_page, feast], method: :delete, data: { confirm: 'Are you sure?' } %> |
        <%= link_to 'details', feast_path(feast) %>
        <span class=<%= feast_color_class(feast.color) %>><%= feast %></span>
      <% else %>
        <%= link_to 'add', new_calendar_page_feast_path(@calendar_page, 'feast[month_number]': date.first, 'feast[day_number]': date.last) %>
      <% end %>
    </td>
  </tr>
<% end %>
</table>

<br>
-->


<table id="calendar_table2">
<% @calendar_page.dates.each do |date| %>
  <% day = Kal::Days::DAY_TABLE2.find{ |day| day[:month_number] == date.first && day[:day_number] == date.last } %>
  <tr>
  <td>
    <%#= display_column('Date', date) %>
    <%= display_date(day) %>
  </td>

  <%@calendar_page.manuscript.columns.each do |column| %>
    <td>
      <%= display_column(column, day) %>
      <%#= display_column(column, date) %>
    </td>
  <% end %>

  <td>
    <% feast = @calendar_page.manuscript.feasts.find{ |f| day[:month_number] == f.month_number && day[:day_number] == f.day_number } %> <!-- temporary redundancy -->
    <% if feast.present? %>
      <%= link_to 'edit', edit_feast_path(feast) %> |
      <%= link_to 'delete', [@calendar_page, feast], method: :delete, data: { confirm: 'Are you sure?' } %> |
      <%= link_to 'details', feast_path(feast) %>
    <% else %>
      <%= link_to 'add', new_calendar_page_feast_path(@calendar_page, 'feast[month_number]': date.first, 'feast[day_number]': date.last) %>
    <% end %>
  </td>

  </tr>
<% end %>
</table>


<%= link_to 'Edit', edit_calendar_page_path %> |

<%= link_to 'Back', "/manuscripts/#{@calendar_page.manuscript.id}#calendar_pages" %>

<%#= link_to 'Back', manuscript_path(@calendar_page.manuscript) %>

      <%#= render '/feasts/form', feast: @manuscript.feasts.build %>

      <%# new_feast = @manuscript.feasts.build(month_number: d.first, day_number: d.last, calendar_page_id: @calendar_page.id, saint_name: 'Yoda') %>
      <%#= render 'feast_form', feast: new_feast %>

      <!-- ,manuscript_id: @calendar_page.manuscript_id) -->